# 03-排版系统（Typography）

> 定义字体、字号、行高和文本样式的完整体系

---

## 字体族

### 主字体
```css
--mainFontFamily: "Noto Sans", sans-serif;
```

**特性**：
- 清晰易读的无衬线字体
- 支持多语言（含中文、日文等）
- 优化的屏幕显示效果

**后备字体链**：
```css
font-family: "Noto Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
```

### 等宽字体
```css
--monoFontFamily: 'Noto Sans Mono', 'Courier New', Consolas, monospace;
```

**用途**：
- 代码块显示
- 等宽数字（Token计数）
- 技术信息展示

---

## 字号系统

### 基础字号
```css
--fontScale: 1;              /* 缩放因子 */
--mainFontSize: calc(var(--fontScale) * 15px);  /* 基础 15px */
```

### 字号层级

| 级别 | 变量名 | 计算值 | 实际大小 | 用途 |
|------|--------|--------|----------|------|
| xs | `fontSize-xs` | `mainFontSize * 0.8` | ~12px | 小号说明文本 |
| sm | `fontSize-sm` | `mainFontSize * 0.9` | ~13.5px | 次要文本 |
| base | `fontSize-base` | `mainFontSize * 1` | ~15px | 正文文本 |
| lg | `fontSize-lg` | `mainFontSize * 1.2` | ~18px | 小标题 |
| xl | `fontSize-xl` | `mainFontSize * 1.5` | ~22.5px | 二级标题 |
| 2xl | `fontSize-2xl` | `mainFontSize * 2` | ~30px | 一级标题 |

### 特殊字号

**消息内容**
- 基础：`var(--mainFontSize)`
- 消息按钮：`calc(var(--mainFontSize) * 1.2)`

**导航栏**
- 图标尺寸：`calc(var(--mainFontSize) * 2)` (~30px)

**底部表单**
- 图标尺寸：`calc(var(--mainFontSize) * 1.9)` (~28.5px)

---

## 行高系统

### 标准行高
```css
/* 正文行高 */
line-height: 1.5;

/* 标题行高 */
line-height: 1.2;

/* 紧凑行高 */
line-height: 1.4;

/* 宽松行高 */
line-height: 1.6;
```

### 行高应用

| 内容类型 | 行高值 | 说明 |
|----------|--------|------|
| 标题 | 1.2 | 紧凑，节省空间 |
| 正文 | 1.5 | 标准可读性 |
| 长文本 | 1.6 | 提高可读性 |
| 按钮文本 | 1 | 垂直居中 |
| 代码 | 1.4 | 适合代码阅读 |

---

## 文本样式

### 1. 标题样式

#### H1 - 主标题
```css
font-size: calc(var(--mainFontSize) * 2);     /* 30px */
font-weight: bold;
line-height: 1.2;
color: var(--SmartThemeBodyColor);
margin-bottom: calc(var(--mainFontSize) * 1);
```

#### H2 - 二级标题
```css
font-size: calc(var(--mainFontSize) * 1.5);   /* 22.5px */
font-weight: bold;
line-height: 1.2;
color: var(--SmartThemeBodyColor);
margin-bottom: calc(var(--mainFontSize) * 0.8);
```

#### H3 - 三级标题
```css
font-size: calc(var(--mainFontSize) * 1.2);   /* 18px */
font-weight: bold;
line-height: 1.3;
color: var(--SmartThemeBodyColor);
margin-bottom: calc(var(--mainFontSize) * 0.6);
```

#### H4 - 四级标题
```css
font-size: var(--mainFontSize);               /* 15px */
font-weight: bold;
line-height: 1.4;
color: var(--SmartThemeBodyColor);
margin-bottom: calc(var(--mainFontSize) * 0.5);
```

### 2. 正文样式

#### Body - 正文
```css
font-size: var(--mainFontSize);               /* 15px */
font-weight: normal;
line-height: 1.5;
color: var(--SmartThemeBodyColor);
```

#### Body Small - 小号正文
```css
font-size: calc(var(--mainFontSize) * 0.9);   /* 13.5px */
font-weight: normal;
line-height: 1.5;
color: var(--SmartThemeBodyColor);
```

#### Caption - 说明文字
```css
font-size: calc(var(--mainFontSize) * 0.8);   /* 12px */
font-weight: normal;
line-height: 1.4;
color: var(--SmartThemeEmColor);
```

### 3. 强调样式

#### Emphasis - 强调
```css
font-style: italic;
color: var(--SmartThemeEmColor);
```

#### Strong - 加粗
```css
font-weight: bold;
color: var(--SmartThemeBodyColor);
```

#### Quote - 引用
```css
border-left: 2px solid var(--SmartThemeQuoteColor);
padding-left: calc(var(--mainFontSize) * 0.8);
color: var(--SmartThemeQuoteColor);
font-style: italic;
```

### 4. 特殊文本样式

#### Code Inline - 行内代码
```css
font-family: var(--monoFontFamily);
font-size: calc(var(--mainFontSize) * 0.9);
background-color: var(--grey30a);
padding: 2px 4px;
border-radius: 3px;
```

#### Code Block - 代码块
```css
font-family: var(--monoFontFamily);
font-size: calc(var(--mainFontSize) * 0.9);
line-height: 1.4;
background-color: var(--grey30a);
padding: var(--spacing-md);
border-radius: 5px;
overflow-x: auto;
```

#### Link - 链接
```css
color: var(--SmartThemeQuoteColor);
text-decoration: underline;
cursor: pointer;
```

```css
/* 悬停状态 */
:hover {
  color: var(--SmartThemeBodyColor);
  text-decoration: none;
}
```

---

## 段落间距

### 标准间距
```css
p {
  margin-top: 0;
  margin-bottom: 10px;
}

/* 列表间距 */
ol, ul {
  margin-top: 5px;
  margin-bottom: 5px;
}

/* 标题间距 */
h1, h2, h3, h4 {
  margin-top: calc(var(--mainFontSize) * 1.5);
  margin-bottom: calc(var(--mainFontSize) * 0.5);
}
```

---

## 文本修饰

### 文本阴影
```css
text-shadow: 0px 0px calc(var(--shadowWidth) * 1px) var(--SmartThemeShadowColor);
```

**应用**：
- 所有文本默认带微阴影
- 增强文本在各种背景上的可读性

### 字体平滑
```css
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
```

---

## 特殊场景排版

### 消息文本
```css
.mes_text {
  font-size: var(--mainFontSize);
  line-height: 1.5;
  color: var(--SmartThemeBodyColor);
}

.mes_text p {
  margin-top: 0;
  margin-bottom: 10px;
}
```

### 推理文本 (Reasoning)
```css
.mes_reasoning {
  font-size: var(--mainFontSize);
  line-height: 1.5;
  color: hsl(from var(--reasoning-body-color) h calc(s * var(--reasoning-saturation)) l);
}
```

### 偏置文本 (Bias)
```css
.mes_bias {
  font-size: calc(var(--mainFontSize) - 0.1rem);
  font-weight: 500;
  color: var(--SmartThemeQuoteColor);
}
```

### Token 计数
```css
.tokenItemizingMaintext {
  font-size: calc(var(--mainFontSize) * 0.8);
  font-family: var(--monoFontFamily);
}

.tokenItemizingSubclass {
  font-size: calc(var(--mainFontSize) * 0.8);
  color: var(--SmartThemeEmColor);
  font-family: var(--monoFontFamily);
}
```

---

## Figma 文本样式命名

```
Typography/
├── Heading/
│   ├── H1
│   ├── H2
│   ├── H3
│   └── H4
├── Body/
│   ├── Regular
│   ├── Small
│   └── Caption
├── Emphasis/
│   ├── Italic
│   ├── Bold
│   └── Quote
├── Code/
│   ├── Inline
│   └── Block
└── Special/
    ├── Link
    ├── Reasoning
    └── Token
```

---

## Sketch 文本样式

### 创建共享文本样式

1. **基础样式**
   - Font: Noto Sans
   - Sizes: 12px, 13.5px, 15px, 18px, 22.5px, 30px
   - Colors: 关联颜色变量

2. **命名规范**
   ```
   Text/H1/Bold
   Text/Body/Regular
   Text/Caption/Secondary
   Text/Code/Mono
   ```

---

## 响应式字号

### 移动端调整
```css
@media screen and (max-width: 768px) {
  :root {
    --fontScale: 0.95;  /* 略微缩小 */
  }
}
```

### 大屏幕调整
```css
@media screen and (min-width: 1920px) {
  :root {
    --fontScale: 1.05;  /* 略微放大 */
  }
}
```

---

## 导出 JSON

```json
{
  "fontFamily": {
    "main": "Noto Sans, sans-serif",
    "mono": "Noto Sans Mono, Courier New, Consolas, monospace"
  },
  "fontSize": {
    "xs": "12px",
    "sm": "13.5px",
    "base": "15px",
    "lg": "18px",
    "xl": "22.5px",
    "2xl": "30px"
  },
  "lineHeight": {
    "tight": "1.2",
    "normal": "1.5",
    "relaxed": "1.6"
  },
  "fontWeight": {
    "normal": "400",
    "medium": "500",
    "bold": "700"
  }
}
```
