# 06-卡片组件规范

## 文档信息
- **版本**: 1.0.0
- **最后更新**: 2025-12-21
- **依赖**: [01-设计令牌](./01-设计令牌.md), [02-颜色系统](./02-颜色系统.md)

---

## 概述

本文档定义SillyTavern中所有卡片组件的设计规范，包括角色卡片、聊天卡片、设置卡片等。卡片是承载内容的核心容器组件，具有统一的视觉风格和交互模式。

---

## 1. 基础卡片 (Base Card)

### 1.1 基础结构

**CSS定义**:
```css
.card {
  background-color: var(--black30a);
  backdrop-filter: blur(var(--blurStrength));
  border: 1px solid var(--SmartThemeBorderColor);
  border-radius: 8px;
  padding: var(--spacing-md);
  transition: all var(--animation-duration) ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Hover 状态 */
.card:hover {
  border-color: var(--SmartThemeQuoteColor);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  transform: translateY(-2px);
}

/* Active 状态 */
.card.active {
  border-color: var(--SmartThemeQuoteColor);
  background-color: var(--black40a);
  box-shadow: 0 0 0 2px var(--SmartThemeQuoteColor);
}
```

### 1.2 卡片尺寸

```css
/* 紧凑型 */
.card-compact {
  padding: var(--spacing-sm);
  border-radius: 6px;
}

/* 标准型（默认） */
.card-default {
  padding: var(--spacing-md);
  border-radius: 8px;
}

/* 宽松型 */
.card-spacious {
  padding: var(--spacing-lg);
  border-radius: 12px;
}
```

### 1.3 卡片变体

| 变体 | 背景色 | 用途 |
|-----|--------|------|
| Default | black30a | 普通内容 |
| Elevated | black40a | 需要强调的内容 |
| Outlined | transparent | 仅边框，轻量级 |
| Filled | black50a | 强调背景 |

---

## 2. 角色卡片 (Character Card)

### 2.1 基础结构

**HTML结构**:
```html
<div class="character_select" data-char-id="123">
  <div class="avatar">
    <img src="avatar.png" alt="角色名">
    <div class="char_status"></div>
  </div>
  <div class="ch_name">角色名</div>
  <div class="ch_description">角色描述...</div>
  <div class="char_stats">
    <span class="stat_item">
      <i class="fa-solid fa-message"></i>
      <span>127</span>
    </span>
  </div>
</div>
```

### 2.2 CSS定义

```css
.character_select {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-sm);
  background-color: var(--black30a);
  backdrop-filter: blur(var(--blurStrength));
  border: 2px solid var(--SmartThemeBorderColor);
  border-radius: 12px;
  padding: var(--spacing-md);
  cursor: pointer;
  transition: all var(--animation-duration) ease;
  position: relative;
}

/* Hover 状态 */
.character_select:hover {
  border-color: var(--SmartThemeQuoteColor);
  background-color: var(--black40a);
  transform: scale(1.02);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* 选中状态 */
.character_select.selected {
  border-color: var(--SmartThemeQuoteColor);
  background-color: var(--black40a);
  box-shadow: 0 0 0 3px rgba(225, 138, 36, 0.3);
}

/* 角色头像 */
.character_select .avatar {
  width: 100px;
  height: 100px;
  position: relative;
}

.character_select .avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 12px;
  border: 2px solid var(--SmartThemeBorderColor);
}

/* 在线状态指示器 */
.char_status {
  position: absolute;
  bottom: 4px;
  right: 4px;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background-color: var(--success-color);
  border: 2px solid var(--SmartThemeBodyColor);
}

/* 角色名称 */
.character_select .ch_name {
  font-size: var(--fontSize-md);
  font-weight: 600;
  color: var(--SmartThemeBodyColor);
  text-align: center;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* 角色描述 */
.character_select .ch_description {
  font-size: var(--fontSize-sm);
  color: var(--SmartThemeEmColor);
  text-align: center;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* 统计信息 */
.char_stats {
  display: flex;
  gap: var(--spacing-md);
  margin-top: var(--spacing-xs);
}

.stat_item {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: var(--fontSize-xs);
  color: var(--SmartThemeEmColor);
}

.stat_item i {
  color: var(--SmartThemeQuoteColor);
}
```

### 2.3 角色卡片列表布局

```css
.character_list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: var(--spacing-md);
  padding: var(--spacing-md);
}

/* 响应式：移动端 */
@media screen and (max-width: 1000px) {
  .character_list {
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: var(--spacing-sm);
  }
  
  .character_select .avatar {
    width: 80px;
    height: 80px;
  }
}
```

---

## 3. 聊天历史卡片 (Chat History Card)

### 3.1 基础结构

**CSS定义**:
```css
.chat_block {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  background-color: var(--black30a);
  backdrop-filter: blur(var(--blurStrength));
  border: 1px solid var(--SmartThemeBorderColor);
  border-radius: 8px;
  padding: var(--spacing-sm);
  cursor: pointer;
  transition: all var(--animation-duration) ease;
  position: relative;
}

/* Hover 状态 */
.chat_block:hover {
  background-color: var(--black40a);
  border-color: var(--SmartThemeQuoteColor);
}

/* 活跃聊天 */
.chat_block.active {
  background-color: var(--black50a);
  border-color: var(--SmartThemeQuoteColor);
  box-shadow: inset 3px 0 0 var(--SmartThemeQuoteColor);
}

/* 聊天头像 */
.chat_block .avatar {
  width: 48px;
  height: 48px;
  flex-shrink: 0;
}

.chat_block .avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 8px;
}

/* 聊天信息 */
.chat_info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.chat_name {
  font-size: var(--fontSize-md);
  font-weight: 500;
  color: var(--SmartThemeBodyColor);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.chat_preview {
  font-size: var(--fontSize-sm);
  color: var(--SmartThemeEmColor);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* 聊天元数据 */
.chat_meta {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
  flex-shrink: 0;
}

.chat_time {
  font-size: var(--fontSize-xs);
  color: var(--SmartThemeEmColor);
}

.unread_count {
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  background-color: var(--SmartThemeQuoteColor);
  color: var(--white100);
  font-size: var(--fontSize-xs);
  font-weight: 600;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
}
```

---

## 4. 设置卡片 (Settings Card)

### 4.1 基础结构

**CSS定义**:
```css
.settings_card {
  background-color: var(--black30a);
  backdrop-filter: blur(var(--blurStrength));
  border: 1px solid var(--SmartThemeBorderColor);
  border-radius: 8px;
  padding: var(--spacing-md);
  margin-bottom: var(--spacing-md);
}

.settings_card_header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-md);
  padding-bottom: var(--spacing-sm);
  border-bottom: 1px solid var(--SmartThemeBorderColor);
}

.settings_card_title {
  font-size: var(--fontSize-lg);
  font-weight: 600;
  color: var(--SmartThemeBodyColor);
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
}

.settings_card_title i {
  color: var(--SmartThemeQuoteColor);
}

.settings_card_body {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}
```

### 4.2 可折叠设置卡片

```css
.settings_card.collapsible .settings_card_header {
  cursor: pointer;
  user-select: none;
}

.settings_card.collapsible .settings_card_header::after {
  content: "\f078";  /* FontAwesome chevron-down */
  font-family: "Font Awesome 6 Free";
  font-weight: 900;
  color: var(--SmartThemeEmColor);
  transition: transform var(--animation-duration) ease;
}

.settings_card.collapsed .settings_card_header::after {
  transform: rotate(-90deg);
}

.settings_card.collapsed .settings_card_body {
  display: none;
}
```

---

## 5. 信息卡片 (Info Card)

### 5.1 基础样式

**CSS定义**:
```css
.info_card {
  display: flex;
  gap: var(--spacing-sm);
  background-color: var(--black30a);
  backdrop-filter: blur(var(--blurStrength));
  border: 1px solid var(--SmartThemeBorderColor);
  border-radius: 8px;
  padding: var(--spacing-sm) var(--spacing-md);
  margin-bottom: var(--spacing-md);
}

.info_card_icon {
  width: 24px;
  height: 24px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.info_card_content {
  flex: 1;
  font-size: var(--fontSize-sm);
  color: var(--SmartThemeBodyColor);
  line-height: var(--line-height-relaxed);
}
```

### 5.2 信息卡片变体

```css
/* 成功信息 */
.info_card.success {
  border-color: var(--success-color);
  background-color: rgba(88, 182, 0, 0.1);
}

.info_card.success .info_card_icon {
  color: var(--success-color);
}

/* 警告信息 */
.info_card.warning {
  border-color: var(--warning-color);
  background-color: rgba(255, 152, 0, 0.1);
}

.info_card.warning .info_card_icon {
  color: var(--warning-color);
}

/* 错误信息 */
.info_card.error {
  border-color: var(--error-color);
  background-color: rgba(244, 67, 54, 0.1);
}

.info_card.error .info_card_icon {
  color: var(--error-color);
}

/* 普通信息 */
.info_card.info {
  border-color: var(--SmartThemeQuoteColor);
  background-color: rgba(225, 138, 36, 0.1);
}

.info_card.info .info_card_icon {
  color: var(--SmartThemeQuoteColor);
}
```

---

## 6. 统计卡片 (Stats Card)

### 6.1 基础结构

**CSS定义**:
```css
.stats_card {
  background-color: var(--black30a);
  backdrop-filter: blur(var(--blurStrength));
  border: 1px solid var(--SmartThemeBorderColor);
  border-radius: 8px;
  padding: var(--spacing-md);
  text-align: center;
  transition: all var(--animation-duration) ease;
}

.stats_card:hover {
  border-color: var(--SmartThemeQuoteColor);
  transform: translateY(-2px);
}

.stats_value {
  font-size: var(--fontSize-3xl);
  font-weight: 700;
  color: var(--SmartThemeQuoteColor);
  margin-bottom: var(--spacing-xs);
}

.stats_label {
  font-size: var(--fontSize-sm);
  color: var(--SmartThemeEmColor);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.stats_change {
  font-size: var(--fontSize-xs);
  margin-top: var(--spacing-xs);
}

.stats_change.positive {
  color: var(--success-color);
}

.stats_change.negative {
  color: var(--error-color);
}
```

---

## 7. 卡片网格布局

### 7.1 响应式网格

**CSS定义**:
```css
.cards_grid {
  display: grid;
  gap: var(--spacing-md);
}

/* 2列布局 */
.cards_grid.cols-2 {
  grid-template-columns: repeat(2, 1fr);
}

/* 3列布局 */
.cards_grid.cols-3 {
  grid-template-columns: repeat(3, 1fr);
}

/* 4列布局 */
.cards_grid.cols-4 {
  grid-template-columns: repeat(4, 1fr);
}

/* 自动填充布局 */
.cards_grid.auto-fill {
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
}

/* 响应式断点 */
@media screen and (max-width: 1000px) {
  .cards_grid.cols-3,
  .cards_grid.cols-4 {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media screen and (max-width: 768px) {
  .cards_grid {
    grid-template-columns: 1fr;
  }
}
```

---

## 8. 卡片操作

### 8.1 卡片菜单

**CSS定义**:
```css
.card_menu {
  position: absolute;
  top: var(--spacing-sm);
  right: var(--spacing-sm);
  opacity: 0;
  transition: opacity var(--animation-duration) ease;
}

.card:hover .card_menu {
  opacity: 1;
}

.card_menu_button {
  width: 28px;
  height: 28px;
  background-color: var(--black70a);
  backdrop-filter: blur(var(--blurStrength));
  border: 1px solid var(--SmartThemeBorderColor);
  border-radius: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--animation-duration) ease;
}

.card_menu_button:hover {
  background-color: var(--SmartThemeQuoteColor);
  border-color: var(--SmartThemeQuoteColor);
}
```

### 8.2 卡片拖拽

```css
.card.dragging {
  opacity: 0.5;
  cursor: move;
  transform: rotate(2deg);
}

.card.drag-over {
  border-color: var(--SmartThemeQuoteColor);
  border-style: dashed;
}
```

---

## 9. Figma 使用指南

### 9.1 创建卡片组件

1. **创建基础卡片**：
   - 绘制矩形容器
   - 应用填充：`black30a`
   - 应用边框：`1px` + `SmartThemeBorderColor`
   - 圆角：`8px`
   - 添加毛玻璃效果

2. **创建变体**：
   - 属性：`Type` = Character | Chat | Settings | Info | Stats
   - 属性：`State` = Default | Hover | Active
   - 属性：`Size` = Compact | Default | Spacious

3. **使用Auto Layout**：
   - 设置内边距
   - 设置子元素间距
   - 响应式调整

### 9.2 角色卡片组件

1. **创建头像组件**：100x100圆角矩形
2. **添加文本层**：名称 + 描述
3. **添加状态指示器**：16x16圆形
4. **组合为组件**，创建Hover变体

### 9.3 导出JSON

```json
{
  "card": {
    "base": {
      "background": "rgba(0, 0, 0, 0.3)",
      "backdropBlur": "20px",
      "border": "1px solid #555555",
      "borderRadius": "8px",
      "padding": "12px",
      "boxShadow": "0 2px 4px rgba(0, 0, 0, 0.2)"
    },
    "hover": {
      "borderColor": "#E18A24",
      "boxShadow": "0 4px 8px rgba(0, 0, 0, 0.3)",
      "transform": "translateY(-2px)"
    }
  },
  "characterCard": {
    "avatar": {
      "width": "100px",
      "height": "100px",
      "borderRadius": "12px"
    },
    "statusIndicator": {
      "size": "16px",
      "position": "bottom-right",
      "offset": "4px"
    }
  }
}
```

---

## 10. Sketch 使用指南

### 10.1 创建Symbol

1. **基础卡片Symbol**：`Card/Base`
2. **角色卡片Symbol**：`Card/Character`
3. **聊天卡片Symbol**：`Card/Chat`

### 10.2 使用Smart Layout

配置Smart Layout自动调整卡片内容高度

---

## 相关文档

- [01-设计令牌](./01-设计令牌.md) - CSS变量定义
- [02-颜色系统](./02-颜色系统.md) - 颜色应用
- [08-布局网格](./08-布局网格.md) - 网格布局

---

**最后更新**: 2025-12-21 | **版本**: 1.0.0
