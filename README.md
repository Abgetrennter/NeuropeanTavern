# Clotho (Neuropean)

![Build Status](https://img.shields.io/badge/build-passing-brightgreen)![Flutter](https://img.shields.io/badge/Flutter-%2302569B.svg?style=flat&logo=Flutter&logoColor=white)![Dart](https://img.shields.io/badge/dart-%230175C2.svg?style=flat&logo=dart&logoColor=white)![License](https://img.shields.io/badge/license-MIT-blue.svg)

**Clotho** æ˜¯ä¸€ä¸ªæ—¨åœ¨é‡æ–°å®šä¹‰ AI è§’è‰²æ‰®æ¼”ï¼ˆRPGï¼‰ä½“éªŒçš„æ¬¡ä¸–ä»£å®¢æˆ·ç«¯ã€‚

ä¸ä¼ ç»Ÿçš„ Web æŠ€æœ¯æ ˆæ–¹æ¡ˆï¼ˆå¦‚ SillyTavernï¼‰ä¸åŒï¼ŒClotho åŸºäº **Flutter** åŸç”ŸæŠ€æœ¯æ ˆæ„å»ºï¼Œè‡´åŠ›äºè§£å†³é•¿æ–‡æœ¬æ¸²æŸ“å¡é¡¿ã€å†…å­˜æ³„æ¼ä»¥åŠé€»è¾‘ä¸è¡¨ç°è€¦åˆç­‰æ ¹æœ¬æ€§ç—›ç‚¹ã€‚æˆ‘ä»¬é‡‡ç”¨ **"Hybrid Agency"ï¼ˆæ··åˆä»£ç†ï¼‰** æ¶æ„ï¼Œå°†ç¡®å®šæ€§çš„é€»è¾‘æ§åˆ¶äº¤ç»™ä»£ç ï¼Œå°†åˆ›é€ æ€§çš„è¯­ä¹‰ç”Ÿæˆäº¤ç»™ LLMï¼Œå®ç°é«˜æ€§èƒ½ã€ç¡®å®šæ€§ä¸æ²‰æµ¸æ„Ÿçš„å®Œç¾å¹³è¡¡ã€‚

---

## ğŸ“– ç›®å½•

- [æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®æ¶æ„](#-é¡¹ç›®æ¶æ„)
- [ä½¿ç”¨æŒ‡å—](#-ä½¿ç”¨æŒ‡å—)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#-è®¸å¯è¯)

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸš€ æè‡´æ€§èƒ½ (Native Performance)**
  åŸºäº Flutter/Dart æ„å»ºï¼Œå½»åº•å‘Šåˆ« Web ç«¯çš„ DOM æ¸²æŸ“ç“¶é¢ˆã€‚å³ä½¿åœ¨è¶…é•¿å¯¹è¯å†å²ä¸‹ï¼Œä¾ç„¶ä¿æŒ 60fps çš„æµç•…æ»šåŠ¨ä½“éªŒã€‚

- **ğŸ§  æ··åˆä»£ç†æ¶æ„ (Hybrid Agency)**
  éµå¾ª "å‡¯æ’’çš„å½’å‡¯æ’’ï¼Œä¸Šå¸çš„å½’ä¸Šå¸" åŸåˆ™ã€‚
  - **Jacquard (ç¼–æ’å±‚)**: è´Ÿè´£ç¡®å®šæ€§çš„æµç¨‹æ§åˆ¶ã€çŠ¶æ€ç®¡ç†ä¸å·¥å…·è°ƒç”¨ã€‚
  - **LLM**: ä¸“æ³¨äºè¯­ä¹‰ç†è§£ã€æƒ…æ„Ÿæ¼”ç»ä¸å‰§æƒ…ç”Ÿæˆã€‚

- **ğŸŒ² å¤šé‡å®‡å®™æ ‘ (Mnemosyne Memory)**
  å¼•å…¥åŸºäºå¿«ç…§ï¼ˆSnapshotï¼‰ä¸å¢é‡ï¼ˆDeltaï¼‰çš„è®°å¿†ç³»ç»Ÿã€‚
  - æ”¯æŒ**æ—¶é—´å›æº¯ (Undo)**ã€**åˆ†æ”¯å‰§æƒ… (Branching)** ä¸ **çŠ¶æ€é‡ç»˜ (Reroll)**ã€‚
  - ç¡®ä¿åœ¨é¢‘ç¹çš„æ—¶ç©ºè·³è·ƒä¸­ï¼Œä¸–ç•ŒçŠ¶æ€ä¸å‰§æƒ…å‘å±•ä¸¥ä¸åˆç¼ã€‚

- **ğŸ§¶ Filament åè®®**
  è‡ªå®šä¹‰çš„ç»“æ„åŒ– XML é€šä¿¡åè®®ï¼Œç¡®ä¿ LLM è¾“å‡ºå¯è¢«ç²¾ç¡®è§£æï¼Œå®ç° UI çš„åŠ¨æ€æ¸²æŸ“ä¸å¯Œäº¤äº’ï¼ˆå¦‚çŠ¶æ€æ§½ã€åŠ¨æ€å¡ç‰‡ï¼‰ã€‚

- **ğŸ“± å…¨å¹³å°å“åº”å¼**
  åŸºäº `AdaptiveScaffold` å®ç°ï¼Œä¸€å¥—ä»£ç å®Œç¾é€‚é… Desktop (>1200dp)ã€Tablet (600-1200dp) ä¸ Mobile (<600dp)ã€‚

---

## ğŸ›  æŠ€æœ¯æ ˆ

æœ¬é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„ Flutter å¼€å‘æ ˆï¼š

- **è¯­è¨€**: [Dart](https://dart.dev/) (SDK >= 3.10.4)
- **æ¡†æ¶**: [Flutter](https://flutter.dev/)
- **çŠ¶æ€ç®¡ç†**: [Riverpod](https://riverpod.dev/) (é…åˆ `riverpod_generator`)
- **è·¯ç”±ç®¡ç†**: [GoRouter](https://pub.dev/packages/go_router)
- **ç½‘ç»œè¯·æ±‚**: [Dio](https://pub.dev/packages/dio)
- **æœ¬åœ°æ•°æ®åº“**: [Drift](https://drift.simonbinder.eu/) (SQLite)
- **JSON åºåˆ—åŒ–**: [Freezed](https://pub.dev/packages/freezed) & [JsonSerializable](https://pub.dev/packages/json_serializable)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„å¼€å‘ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

- **Flutter SDK**: ç‰ˆæœ¬ `3.10.4` æˆ–æ›´é«˜
- **Dart SDK**: éš Flutter å®‰è£…
- **IDE**: VS Code (æ¨è) æˆ– Android Studio

### å®‰è£…æ­¥éª¤

1.  **å…‹éš†ä»“åº“**

    ```bash
    git clone https://github.com/your-username/neuropean.git
    cd neuropean
    ```

2.  **å®‰è£…ä¾èµ–**

    ```bash
    flutter pub get
    ```

3.  **ä»£ç ç”Ÿæˆ (Build Runner)**
    æœ¬é¡¹ç›®ä½¿ç”¨äº† Freezed, Riverpod Generator å’Œ Driftï¼Œå› æ­¤è¿è¡Œå‰**å¿…é¡»**æ‰§è¡Œä»£ç ç”Ÿæˆã€‚

    ```bash
    # ä¸€æ¬¡æ€§ç”Ÿæˆ
    dart run build_runner build -d

    # æˆ–è€…åœ¨å¼€å‘æ—¶æŒç»­ç›‘å¬å˜æ›´
    dart run build_runner watch -d
    ```

4.  **è¿è¡Œé¡¹ç›®**

    ```bash
    flutter run
    ```

---

## ğŸ— é¡¹ç›®æ¶æ„

Clotho é‡‡ç”¨æ¸…æ™°çš„åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œè¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒ `doc/` ç›®å½•ï¼š

- **`doc/architecture/project_core_blueprint.md`**: é¡¹ç›®æ ¸å¿ƒè“å›¾ä¸è®¾è®¡å“²å­¦
- **`doc/architecture/system_architecture.md`**: ç³»ç»Ÿæ•´ä½“æ¶æ„å›¾
- **`lib/core/`**: æ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼ˆè·¯ç”±ã€ä¸»é¢˜ã€æŠ½è±¡å±‚ï¼‰
- **`lib/features/`**: ä¸šåŠ¡åŠŸèƒ½æ¨¡å—ï¼ˆCharacter, Chat, XML Parserï¼‰

### æ ¸å¿ƒæ¨¡å—æ¦‚è§ˆ

- **The Stage (è¡¨ç°å±‚)**: çº¯ç²¹çš„æ¸²æŸ“ä¸äº¤äº’ç•Œé¢ã€‚
- **The Loom (ç¼–æ’å±‚)**: æ’ä»¶åŒ–çš„æµæ°´çº¿æ‰§è¡Œå™¨ (Jacquard)ã€‚
- **The Memory (è®°å¿†å±‚)**: ä¸Šä¸‹æ–‡ç®¡ç†ä¸å¿«ç…§å¼•æ“ (Mnemosyne)ã€‚

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

*(æ­¤å¤„å°†åœ¨åç»­æ›´æ–°å…·ä½“çš„é…ç½®ä¸ä½¿ç”¨æ•™ç¨‹)*

ç›®å‰æ‚¨å¯ä»¥è¿è¡Œé¡¹ç›®å¹¶ä½“éªŒä»¥ä¸‹åŠŸèƒ½ï¼š
1.  **è§’è‰²å¡åŠ è½½**: æ”¯æŒå¯¼å…¥ç¬¦åˆ V2/V3 è§„èŒƒçš„è§’è‰²å¡ã€‚
2.  **èŠå¤©ç•Œé¢**: ä½“éªŒåŸºäº Atomized æˆ– Material 3 é£æ ¼çš„èŠå¤© UIã€‚
3.  **XML è§£ææ¼”ç¤º**: åœ¨å¼€å‘è€…å·¥å…·ä¸­æµ‹è¯• Filament åè®®çš„è§£æèƒ½åŠ›ã€‚

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬éå¸¸æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼å¦‚æœæ‚¨æœ‰å…´è¶£æ”¹è¿› Clothoï¼Œè¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1.  Fork æœ¬ä»“åº“ã€‚
2.  åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)ã€‚
3.  æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)ã€‚
4.  æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)ã€‚
5.  å¼€å¯ä¸€ä¸ª Pull Requestã€‚

è¯·ç¡®ä¿åœ¨æäº¤å‰è¿è¡Œ `flutter test` ä»¥éªŒè¯ä»£ç çš„æ­£ç¡®æ€§ã€‚

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚